#pragma once

#include <cstdint>

constexpr int      PWM_RESOLUTION   = 15;
constexpr uint32_t PWM_MAX_VAL = (1<<PWM_RESOLUTION) - 1;

constexpr int SINE_LUT_IDX_RESOLUTION_bit =  6;
constexpr int SINE_LUT_IDX_RESOLUTION     = 64;
constexpr int THETA_INT_RESOLUTION_bit    = 32;

inline uint8_t theta_int_to_lut_idx(uint32_t theta) {
	return (uint8_t)(theta>>(THETA_INT_RESOLUTION_bit-SINE_LUT_IDX_RESOLUTION_bit));
}
const uint32_t SIN_LOOKUP[SINE_LUT_IDX_RESOLUTION] = {
	0x00000000, 0x00000C8B, 0x000018F8, 0x00002527, 0x000030FB, 0x00003C56, 0x0000471C, 0x00005133,
	0x00005A81, 0x000062F1, 0x00006A6C, 0x000070E1, 0x00007640, 0x00007A7C, 0x00007D89, 0x00007F61,
	0x00007FFF, 0x00007F61, 0x00007D89, 0x00007A7C, 0x00007640, 0x000070E1, 0x00006A6C, 0x000062F1,
	0x00005A81, 0x00005133, 0x0000471C, 0x00003C56, 0x000030FB, 0x00002527, 0x000018F8, 0x00000C8B,
	0x00000000, 0x0C8B0000, 0x18F80000, 0x25270000, 0x30FB0000, 0x3C560000, 0x471C0000, 0x51330000,
	0x5A810000, 0x62F10000, 0x6A6C0000, 0x70E10000, 0x76400000, 0x7A7C0000, 0x7D890000, 0x7F610000,
	0x7FFF0000, 0x7F610000, 0x7D890000, 0x7A7C0000, 0x76400000, 0x70E10000, 0x6A6C0000, 0x62F10000,
	0x5A810000, 0x51330000, 0x471C0000, 0x3C560000, 0x30FB0000, 0x25270000, 0x18F80000, 0x0C8B0000
};
inline uint32_t sin_lut(uint32_t x) {
	uint8_t lut_idx = theta_int_to_lut_idx(x);
	return SIN_LOOKUP[lut_idx];
}
